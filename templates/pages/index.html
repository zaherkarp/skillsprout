{% extends "base.html" %}

{% block title %}{{ app_name }} - Discover Your Career Path{% endblock %}

{% block content %}
<div class="card">
    <h2>Welcome to SkillSprout</h2>
    <p>Discover job transition opportunities based on your skills and O*NET occupation data.</p>

    {% if demo_mode %}
    <div class="alert alert-info">
        <strong>Demo Mode:</strong> Using mock O*NET data. To use real O*NET Web Services, configure credentials in .env file.
    </div>
    {% endif %}
</div>

<div class="card">
    <h3>Get Started</h3>
    <p>Follow these steps to discover your career transition opportunities:</p>

    <ol style="line-height: 2;">
        <li><strong>Create a profile</strong> - Set up your user account</li>
        <li><strong>Select your current role</strong> - Tell us your current occupation</li>
        <li><strong>Rate your skills</strong> - Self-assess your proficiency in key skills</li>
        <li><strong>Get recommendations</strong> - Discover jobs you can transition into</li>
    </ol>

    <div style="margin-top: 30px;">
        <button class="btn btn-success" onclick="createProfile()">Create Profile & Start</button>
        <a href="/api/v1/docs" class="btn btn-secondary">API Documentation</a>
    </div>
</div>

<div class="card">
    <h3>How It Works</h3>
    <p><strong>Three recommendation buckets:</strong></p>
    <ul style="margin-left: 20px; line-height: 2;">
        <li><strong>Ready Now:</strong> Jobs you can apply to immediately based on your current skills</li>
        <li><strong>Trainable:</strong> Jobs within reach with focused training (3-18 months)</li>
        <li><strong>Long-term Reskill:</strong> Jobs requiring significant reskilling effort (1-4 years)</li>
    </ul>

    <p style="margin-top: 20px;"><strong>Smart recommendations:</strong></p>
    <ul style="margin-left: 20px; line-height: 2;">
        <li>Baseline scoring using match scores and skill gap analysis</li>
        <li>Learns from your feedback (clicks, saves, applications, outcomes)</li>
        <li>Provides training path suggestions based on job zone and skill gaps</li>
    </ul>
</div>

<div class="card">
    <h3>API Endpoints</h3>
    <p>Access the full API via these endpoints:</p>
    <ul style="margin-left: 20px; line-height: 2;">
        <li><code>GET /api/v1/health</code> - Health check</li>
        <li><code>GET /api/v1/occupations/search</code> - Search occupations</li>
        <li><code>POST /api/v1/user/profile</code> - Create user profile</li>
        <li><code>POST /api/v1/user/{id}/recommendations</code> - Get recommendations</li>
        <li><code>POST /api/v1/feedback</code> - Submit feedback</li>
        <li><code>GET /api/v1/model/status</code> - Model status</li>
    </ul>
    <p style="margin-top: 15px;">
        <a href="/api/v1/docs" class="btn">View Interactive API Docs</a>
    </p>
</div>

<script>
    async function createProfile() {
        try {
            const response = await fetch('/api/v1/user/profile', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({})
            });

            if (!response.ok) {
                throw new Error('Failed to create profile');
            }

            const data = await response.json();
            alert(`Profile created! User ID: ${data.id}`);
            window.location.href = `/flow/${data.id}`;
        } catch (error) {
            alert('Error creating profile: ' + error.message);
        }
    }
</script>
{% endblock %}
